{"version":3,"sources":["meteor://ðŸ’»app/packages/oauth2/oauth2_server.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0E","file":"/packages/oauth2.js","sourcesContent":["// connect middleware\nOAuth._requestHandlers['2'] = function (service, query, res) {\n  // check if user authorized access\n  if (!query.error) {\n    // Prepare the login results before returning.\n\n    // Run service-specific handler.\n    var oauthResult = service.handleOauthRequest(query);\n    var credentialSecret = Random.secret();\n\n    var credentialToken = OAuth._credentialTokenFromQuery(query);\n\n    // Store the login result so it can be retrieved in another\n    // browser tab by the result handler\n    OAuth._storePendingCredential(credentialToken, {\n      serviceName: service.serviceName,\n      serviceData: oauthResult.serviceData,\n      options: oauthResult.options\n    }, credentialSecret);\n  }\n\n  // Either close the window, redirect, or render nothing\n  // if all else fails\n  OAuth._renderOauthResults(res, query, credentialSecret);\n};\n"]}